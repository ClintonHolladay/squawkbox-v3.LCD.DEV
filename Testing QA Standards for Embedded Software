AB3D Embedded Software Testing / QA Standards

- Testing should be designed to be destructive, that is, to prove the program doesn’t work!

Software:
- AVOID the String class as it will lead to excessive dynamic memory allocation, Heap fragmentaion, 
  and random / abnormal behavior that is hard to diagnose.
- All code that complies and is to be either submitted for GitHub commit or used in a hardware 
  testing application is to be ran through CPPCheck, and corrected accordingly. 

- All dev code that is to be used in a hardware testing application is to have its respective 
  microcontroller's SRAM analyzed at each level of "embedded" or sub function that is called. 
  This is currently accomplished using the "MemoryFree-Master" library. This will help to eliminate 
  any memory overflows / stack crashes. A 20% tolerance is to be maintained. If available SRAM 
  goes below this, then memory allocation will be further developed and performance modifications 
  made before proceeding with testing. 

- By placing a trace statement, such as a printf( ), at the beginning of every block, you can 
  track when the block—and by implication all the statements in the block—are executed.

- All prinf() calls are to be #define(d) out of (or completely removed from) production code. 

- Main loop() is to be clocked and the time documented after any addition to the code. This is to check 
  the responsiveness to both the boiler and the user. If needed individual funtion() entry-point and 
  exit-point time measurements can be taken and averaged to determine the time of execution of a 
  particular trouble funtion. 

Functional Testing “Black Box”: Because black-box tests depend only on the program requirements 
and its I/O behavior, they can be developed as soon as the requirements are complete. This allows 
black-box test cases to be developed in parallel with the rest of the system design.

• Stress tests: Tests that intentionally overload input channels, SD card Module, 
  memory management systems, SIM Module, and so on.
• Boundary value tests: Inputs that represent “boundaries” within a particular range (for example, 
  largest and smallest integers together with − 1, 0, + 1, for an integer input) and input values 
  that should cause the output to transition across a similar boundary in the output range.
• Exception tests: Tests that should trigger a failure mode or exception mode.
• Random tests: Generally, the least productive form of testing but still widely used to evaluate 
  the robustness of user-interface code.
• Performance tests: Does it do what it is designed to do under normal conditions? 
  - Test ALL alarms to ensure the proper messages gets sent.
  - Access ALL UI screens and sub screens.
  - Access ALL parameters within these screens and sub screens.
  - Ensure ALL default inputs are installed.
  - Inspect data logging to ensure functionality and formatting. 
  - Inspect RTC time initialization. 

Coverage Tests “White box”: Coverage tests are devised with full knowledge of how the software 
is implemented, that is, with permission to “look inside the box.” White-box tests are designed with 
the source code handy.

• Statement coverage: Test cases selected because they execute every statement in the program at least once.
• Decision or branch coverage: Test cases chosen because they cause every
  branch (both the true and false path) to be executed at least once.
• Condition coverage: Test cases chosen to force each condition (term) in a
  decision to take on all possible logic values.
  
=====================================================================================================================
=========================================== Hardware / Field testing:================================================
=====================================================================================================================

- A1 Cleaners squawkbox-v3.LCD.0 TOBE installed SEPT 2022:
   Completely new version. Replaced transformers with contactors, Major software update, added LCD screen,
   customer now has the ability to input their own phone numbers and activate / deactivate them. 
   
   *Current failures: 0.
   
   Initial concerns to address:
   - . 
=====================================================================================================================
- A1 Cleaners A1_V2_0 installed AUG 2021:
   Software update to fis SIM reboot issue from below. 
   
   *Current failures: 0.
   
   Initial concerns to address:
   - SIMBoot() should function auotmatically upon start-up. 
=====================================================================================================================   
- A1 Cleaners A1_V1_0 installed MAR 2021: 
   Boiler is currently running at a normal boiler operating room temp of >140F for 5 days a week. 
   
   *Current environmental failures: 1. (Teensy 4.1 for monitoring temp / humidity) - unrelated to 
                                       SquawkBox performance. 
   *Current hardware failures: 1. (RS-485 module) - manufacturer defect. 
   *Current software failures: 1. (Heap Fragmentaion causing stack crash) - Use of C style strings 
                                  instead of String Class corrected issue. This presented as abnormal / random 
                                  behavior after an undertermined amount of time.
   *Current software failures: 2. (SIM reboot issue) SIM module get power to A3 pin every time the squawk reboots. 
                                  This causes the SIM module to power off if only the Mega resets. THis issue will 
                                  lead to an OFF SIM module and cueeently the Mega has to be iether completely 
                                  powered down or reset twice to prevent this. 
   
   Initial concerns to address:
   - Microcontroller input wire shielding (Interference caused by close proximity to 120VAC -> 5VDC transformers)
   - DIN rail mounting method needs to be 3D printed in PETG. 
   - Electrical panel needs to be 2x-3x larger. 
   - Standoffs will be a requirement for mounting panels directly onto a boiler. 
   - Larger / longer antenne needed to help eliminate building 4G LTE interference. 
   - Consider an external Squawk RESET button.
   - Consider using INPUT_PULLUP and pulling contactors to ground instead of using 120VAC transformers to input 5VDC to board. 
========================================================================================================================
- MayDay Brewery breadboard installed AUG 2019 / deprecated NOV 2021:
   Boiler is currently running 5 days a week.
   
   *Current environmental failures: 0. 
   *Current hardware failures: 2. (SIM900 Module) - manufacturer defect. 2G phase out requiring major update.
                                  (SIM7000A 4G Module) - manufacturer defect. Start using DFRobot modules instead. 
   *Current software failures: 2. (HLPC()) - Edit to the logic corrected issue.
                                  (MODBus()) - Edit to the logic corrected issue.
   
   Initial concerns to address:
   - PCB design solution needs to be found. 
   - Additional functionality required to be a final solution.
   - DIN rail mounting solution needs to be found. 
   - Needs a dedicated Electrical panel. 
   - Antenne needed to help eliminate building phone signal interference.
